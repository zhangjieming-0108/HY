<!DOCTYPE html>
<html>

<head lang="en">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>花语|首页</title>
    <link rel="stylesheet" href="../css/index.css" />
    <link rel="stylesheet" href="../css/animate.css" />
</head>

<body>
    <div id="box">
        <!--轮播图-->
        <div class="lunbo">
            <div id="btn-left"></div>
            <ul class="transition">
                <li><img data-target="tab" src="../images/lunbo1.jpg" alt="图片已损环" ></li>
                <li><img src="../images/BJ.jpg" alt="图片已损坏"></li>
                <li><img data-target="tab" src="../images/lunbo1.jpg" alt="图片已损环" /></li>
            </ul>
            <ul>
                <li class="active"></li>
                <li></li>
            </ul>
            <div id="btn-right"></div>
        </div>
        <!--推荐品-->
        <div class="tuijian">
            <img data-target="tab" src="../images/tuijian.jpg " alt="图片已损环" />
            <img data-target="tab" src="../images/lunbo1.jpg " alt="图片已损环" />
        </div>
        <!-- 今日上新 -->
        <div class="xingheader">
            <div class="xiaoheader">
                <span class="neirong">今日上新</span>
                <span class="neirong1">NEW product</span>
                <a href="product.html">+查看更多</a>
            </div>
        </div>
        <div class="xingshanpingBOX">
            <div class="xingshanping" data-target="tab">
               <span><a href="individual.html"><img src="../images/shanping001.jpg" alt="图片已损坏"></a></span>
                <span>植物花卉001</span>
                <span>￥5900</span>
            </div>
            <div data-target="tab">
                <span><a href="individual.html"><img src="../images/shanping002.jpg" alt="图片已损坏"></a></span>
                <span>植物花卉002</span>
                <span>￥6900</span>
            </div>
            <div data-target="tab">
                <span><a href="individual.html"><img src="../images/shanping003.jpg" alt="图片已损坏"></a></span>
                <span>植物花卉003</span>
                <span>￥5000</span>
            </div>
            <div data-target="tab">
                <span><a href="individual.html"><img src="../images/shanping004.jpg" alt="图片已损坏"></a></span>
                <span>植物花卉004</span>
                <span>￥6500</span>
            </div>
        </div>
        <!-- 限时促销 -->
        <div class="xingheader">
            <div class="xiaoheader">
                <span class="neirong">限时促销</span>
                <span class="neirong1">sales promotion</span>
                <a href="product.html">+查看更多</a>
            </div>
        </div>
        <div class="xianshibox">
            <div class="xianshibox1" data-target="tab">
                <div>
                    <p>
                        <span>360</span>天
                        <span>12</span>时
                        <span>48</span>分钟
                        <span>4</span>秒
                    </p>
                </div>
                <img src="../images/xianshi.jpg" alt="图片已损坏">
            </div>
            <div class="xianshibox2" data-target="tab">
                <img src="../images/xianshi1.jpg" alt="图片已损坏">
                <div>
                    <p>
                        <span>360</span>天
                        <span>12</span>时
                        <span>48</span>分钟
                        <span>4</span>秒
                    </p>
                </div>
            </div>
        </div>
        <!-- 花语的概括介绍  -->
        <div class="midtu">
            <div class="midtu1">
                <img src="../images/lunbo1.jpg" alt="图片已损坏" />
            </div>
            <div class="midtu2">
                <p>
                    <img src="../images/logo.png" alt="图片已损坏" />
                </p>
                <p data-target="tab">我们的流线式网页布局设计方案和可视化图文内容编辑模式让网站制作和维护成为一件轻松惬意的事。起飞页提供了海量精美网站模板和成品网站，起飞页的核心竞争力来自于它集流线式布局方案与可视化内容编辑于一体，支持打字传图、自由拖拽，不需要专业编写代码，也没有其他建站工具的层叠式烦恼，您可以随心所欲创建区块、添加组件…
                </p>
            </div>
        </div>
        <div class="xingheader">
            <div class="xiaoheader">
                <span class="neirong">装点家园</span>
                <span class="neirong1">decorate the homes</span>
                <a href="product.html">+查看更多</a>
            </div>
        </div>
        <!-- 家园装点 -->
        <div class="jiayuan">
            <div class="jiayuanbox" data-target="tab">
                <span>
                    <a href="individual.html">
                    <img src="../images/shanping008.jpg" alt="图片已损坏" />
                    </a>
                </span>
                <ul>
                    <li>植物花卉008</li>
                    <li>￥5900</li>
                </ul>
            </div>
            <div class="jiayuanbox" data-target="tab">
                <ul>
                    <li>植物花卉006</li>
                    <li>￥6000</li>
                </ul>
                <span>
                    <a href="individual.html">
                    <img src="../images/shanping006.jpg" alt="图片已损坏" />
                    </a>
                </span>
            </div>
            <div class="jiayuanbox" data-target="tab">
                <span>
                    <a href="individual.html">
                    <img src="../images/shanping004.jpg" alt="图片已损坏" />
                    </a>
                </span>
                <ul>
                    <li>植物花卉004</li>
                    <li>￥6500</li>
                </ul>
            </div>
            <div class="jiayuanbox" data-target="tab">
                <ul>
                    <li>植物花卉002</li>
                    <li>￥5000</li>
                </ul>
                <span>
                    <a href="individual.html">
                    <img src="../images/shanping002.jpg" alt="图片已损坏" />
                    </a>
                </span>
            </div>
        </div>
        <!-- 花语门店的活动及概要样式 -->
        <div class="hua_bot_list">
            <div class="hua_bot_list_left" data-target="tab">
                <div class="hua_bot_list_left_top">
                    <img src="../images/BJ.jpg" alt="图片已损环" />
                    <div>
                        <h6>山中花店的活动中 稀有种子如何获得？</h6>
                        <span>发布日期：2017-05-23</span>
                        <p>从一九四七年巴黎蒙田大街30号New Look的展出开始，Dior就成为高级女装的代名词, 继承了法国高级女装的传统，始终保持华丽的设计路线，做工精细，迎合上流社会成熟女性的审...
                        </p>
                    </div>
                </div>
                <div class="hua_bot_list_left_bot">
                    <img src="../images/gaiyoa.png" alt="图片已损环" />
                    <div>
                        <h6>天气干燥，花店老板推荐制氧绿植</h6>
                        <span>发布日期：2017-05-23</span>
                        <p>秋天的拉萨，天气比较干燥，这个时候在家里养一些可以制造氧气和水分的植物大有好处。记者走访多个花店后发现，很多店老板都会同时提到一种制氧植物——红豆杉。红豆杉有“植物增氧机”之称..
                        </p>
                    </div>
                </div>
            </div>
            <div class="hua_bot_list_right" data-target="tab">
                <img src="../images/xianshi.jpg" alt="图片已损环" />
            </div>
        </div>
        <!-- 运输 、礼品、 服务、 优惠券相关 -->
        <div class="index_yun_li_fu_you">
            <div class="index_yun_li_fu_you_box" data-target="tab">
                <img src="../images/huayuyunshu.png" alt="图片已损环" />
                <div>
                    <h4>满1000元全国包邮</h4>
                    <p>全场订单满1000元全国包邮</p>
                </div>
            </div>
            <div class="index_yun_li_fu_you_box" data-target="tab">
                <img src="../images/huayulipin.png" alt="图片已损环" />
                <div>
                    <h4>下单送精美礼品</h4>
                    <p>本店购买任意商品赠送精美礼品</p>
                </div>
            </div>
            <div class="index_yun_li_fu_you_box" data-target="tab">
                <img src="../images/huayufuqu.png" alt="图片已损环" />
                <div>
                    <h4>贴心的售后服务</h4>
                    <p>7x24小时售后随时为您服务</p>
                </div>
            </div>
            <div class="index_yun_li_fu_you_box" data-target="tab">
                <img src="../images/huayuyouhuijuan.png" alt="图片已损环" />
                <div>
                    <h4>店铺优惠劵</h4>
                    <p>每日整点可领取限量优惠劵</p>
                </div>
            </div>
        </div>
    </div>
    <script>
        // 页面滚动条带动的页面动画功能
    (function(){
        //页面加载时候
        window.onload = function () {
            //获取元素 
            // 获取推荐图元素  
            var imgs = document.querySelectorAll("#box .tuijian [data-target=tab]");
            // 获取轮播图元素
            var lun=document.querySelectorAll("#box .lunbo [data-target=tab]")[0];
            // 获取今日新品元素
            var  xinpings=document.querySelectorAll("#box .xingshanpingBOX [data-target=tab]");
            // 获取限时商品的元素
            var xianshiboxs=document.querySelectorAll("#box .xianshibox [data-target=tab]");
            // 获取概括介绍的文本元素
            var text=document.querySelectorAll("#box .midtu .midtu2 [data-target=tab]")[0];
            // 获取家园装点的元素
            var jiayuans=document.querySelectorAll("#box .jiayuan [data-target=tab]");
            // 获取花语门店的活动及概要样式
            var hua_bot_lists=document.querySelectorAll("#box .hua_bot_list [data-target=tab]");
            // 获取运输 、礼品、 服务、 优惠券相关
            var index_yun_li_fu_yous=document.querySelectorAll("#box .index_yun_li_fu_you [data-target=tab]");
             //给轮播图元素添加类:className
            lun.className = "fixed";
            for (var img of imgs) {
                    //给推荐图元素添加类:className
                    img.className = "fixed";
            }
            //绑定事件滚动事件
            window.onscroll = function () {
                //获取滚动条滚动过的距离
                var scrollTop = document.body.scrollTop || document.documentElement.scrollTop;
                // 当滚动到<指定位置>时
                if(scrollTop>=150){
                    //遍历每个上新商品图元素
                    for(var xinping of xinpings){
                        //给今日上新商品图元素添加类:className
                    xinping.className = "fixed";
                    }
                }
                if(scrollTop>=550){
                    //遍历每个限时商品元素
                    for(var xianshibox of xianshiboxs){
                        //给限时商品图元素添加id;
                        xianshibox.id = "fixed";
                    }
                }
                if(scrollTop>=900){
                    //给花语的概括介绍文本的元素添加id;
                    text.id = "fixed";
                }
                if(scrollTop>=1300){
                    //遍历每个家园商品元素
                    for(var jiayuan of jiayuans){
                        //给限时商品图元素添加id;
                        jiayuan.id = "fixed";
                    }
                }
                if(scrollTop>=1900){
                    //遍历花语门店的活动及概要样式的左右两边元素
                    for(var hua_bot_list of hua_bot_lists){
                        //给花语门店的活动及概要样式元素添加id;
                        hua_bot_list.id = "fixed";
                    }
                }
                if(scrollTop>=2200){
                    //遍历运输 、礼品、 服务、 优惠券相关元素
                    for(var index_yun_li_fu_you of index_yun_li_fu_yous){
                        //给运输 、礼品、 服务、 优惠券相关元素添加id;
                        index_yun_li_fu_you.id = "fixed";
                    }
                }
            }

        }
    })();
    // 轮播图功能
    (function(){
        var i=0;//显示的第几张图片，从0开始
        var li_width=1260;//每张图片的固定宽度
        var duration=500;//每次轮播的持续时间
        var li_count=2;//小圆点的个数
        // 获取要移动的ul
        var ulImgs=document.querySelector(".lunbo ul:nth-child(2)");
        // 获取包含小圆点的元素列表
        var ulIdxs=ulImgs.nextElementSibling;
        // 获取小圆点的元素列表
        var lis=ulIdxs.children;
        // 函数创建，从当前位置移动到任意一个范围内的位置
        function moveTo(to){
            //如果用户没有传入要跳到第几张图，就默认跳到当前图的下张
            if(to==undefined){
                to=i+1;
            } 
           //如果滚动从头开始，再重新加上transition
           if(i==0){ 
                if(to>i){
                    ulImgs.className="transition";
                }else{
                    ulImgs.className="";
                    //将ulImgs拉取到最左侧
                    ulImgs.style.marginLeft=-li_width*li_count+"px";
                    setTimeout(function(){
                        moveTo(li_count-1);
                    },100);
                    return;                 
                }
            } 
           //先将表示第几张图片的变量i变为目标位置
           i=to; 
           //再用i计算ulimgs的marginLeft距离
           ulImgs.style.marginLeft=-i*li_width+"px";
           //先删除所有小圆点的class
           for(var li of lis){
               li.className="";
           }
           if(i==li_count){
               i=0;
               //当transition动画播放完之后，才
               setTimeout(function(){
                   //清掉transition属性
                ulImgs.className="";
                //将ulImgs拉回0位置
                ulImgs.style.marginLeft=0;
               },duration);
           }
           //再给当前位置的小圆点添加class active
            lis[i].className="active";
        }
        // 获取左右点击按钮
        var btnLeft=document.getElementById("btn-left");
        var btnRight=document.getElementById("btn-right");
        //用开关，控制，上次动画没有播放完，下次动画不能开始！
        var canClick=true;
        btnRight.onclick=function(){
            move(1); 
        }
        function move(n){
            if(canClick){//只有可以单击时
                 moveTo(i+n);//才调用真正移动ul的方法
                canClick=false;//马上把开关关上，禁止再次点击
                //只有本地transition动画播放完，才能自动打开开关，点击按钮才有反应。
                setTimeout(function(){
                canClick=true;
                },duration+100);
            }
        }
        btnLeft.onclick=function(){
            move(-1);
        }
        //每次轮播之间间隔事件是2秒
        var interval=3000;
        var timer=setInterval(function(){
            moveTo();
        },3000);
        // 获取轮播图显示界面
        var lunbo=document.querySelector("#box>.lunbo>ul:nth-child(2)");
        // 单鼠标悬停的时候清除周期性定时器
        lunbo.onmouseover=function(){
            clearInterval(timer);
        }
        // 单鼠标离开的时候启动周期性定时器
        lunbo.onmonseout=function(){
            timer=setInterval(function(){
                moveTo();
            },3000);
        }
    })();
    </script>
</body>
</html>